---
layout: post
status: publish
published: true
title: 1С-Битрикс и zlib

date: '2015-02-22 13:11:00 +0200'

categories:
- cms
tags:
- php
- 1c
- bitrix
---
<div dir="ltr" style="text-align: left;" trbidi="on">
Удаленная установка с помощью <b>bitrixsetup.php</b> не работает на некоторых сборках php5.3+.</p>
<p>Собственно при попытке установки происходит следующая ошибка:</p>
<pre>GZIP module is not installed!</pre>
<p>
Дело в том что в установщике не учтен известный&nbsp;<a href="https://bugs.php.net/bug.php?id=53829">баг #53829</a>, суть которого состоит в том что функция&nbsp;gzopen была заменена на <b>gzopen64</b>. Таким образом установщик 1С-Битрикс ссылается на функции без префиксов "64" и при проверки на наличие функции происходит ошибка.</p>
<p><a name='more'></a><br />
Список доступных функций zlib можно просмотреть через терминале следующим образом:</p>
<pre>php -r "var_dump(get_extension_funcs('zlib'));"</pre>
<p>
В этом списке могут оказаться такие имена:  </p>
<pre>  string(8) "gzopen64"
  string(8) "gzseek64"
  string(8) "gztell64"
</pre>
<p>
В случае если такие наименование есть, проведем некоторые операции.</p>
<p>Так как прототипы функций "без префикса" и с префиксом "64" совпадают, нам достаточно заменить все имена в файле bitrixsetup.php на актуальные.</p>
<p>Сделать это можно либо через текстовый редактор, либо с помощью такой команды:</p>
<div>
</div>
<p>Далее можно зайти в веб-интерфейс установщика и выбрать устанавливаемую версию, после чего нажать "далее". Так как при этом установщик bitrixsetup.php обновит снова появиться "GZIP module is not installed!". Следовательно производим замену имен функций снова и жмем "f5"(повторно отправляем POST запрос).<br />
На этом все, установка проходит как обычно.</div>
